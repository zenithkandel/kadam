<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Verification - KADAM</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style/signup.css"> <!-- Reusing input styles -->
    <link rel="stylesheet" href="style/verification.css">
</head>
<body>
    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
        <i class="fa-solid fa-sun"></i>
    </button>

    <main class="verification-container">
        <header class="verification-header">
            <div class="logo">
                <div class="logo-icon"><i class="fa-solid fa-layer-group"></i></div>
            </div>
            <h1>Complete Your Profile</h1>
            <p>Verify your identity to start using KADAM</p>
        </header>

        <!-- Role Simulator (For Development/Demo) -->
        <div class="role-simulator">
            <h4>Select Role to Preview</h4>
            <div class="role-btn-group">
                <button class="role-btn active" onclick="switchRole('student')">Student</button>
                <button class="role-btn" onclick="switchRole('employer-individual')">Employer (Individual)</button>
                <button class="role-btn" onclick="switchRole('employer-company')">Employer (Company)</button>
            </div>
        </div>

        <!-- STUDENT VERIFICATION FORM -->
        <form id="studentForm" class="verification-form">
            <!-- Contact Verification -->
            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-address-card"></i> Contact Verification</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Email Address</label>
                        <div class="input-wrapper">
                            <input type="email" value="student@example.com" readonly class="valid">
                            <i class="fa-solid fa-circle-check success-icon" style="color: var(--success-color)"></i>
                        </div>
                        <span class="form-help">Verified during signup</span>
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <div class="input-wrapper">
                            <input type="tel" value="+977 9800000000" readonly class="valid">
                            <i class="fa-solid fa-circle-check success-icon" style="color: var(--success-color)"></i>
                        </div>
                        <span class="form-help">Verified during signup</span>
                    </div>
                </div>
            </div>

            <!-- Profile Picture -->
            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-camera"></i> Profile Picture</h3>
                <p class="form-help" style="margin-bottom: 15px;">Please upload a clear photo showing your face (eyes, nose, ears visible).</p>
                
                <div class="file-upload-area" onclick="document.getElementById('studentPhoto').click()">
                    <i class="fa-solid fa-user-circle"></i>
                    <p>Click to upload profile picture</p>
                    <span>JPG, PNG (Max 5MB)</span>
                </div>
                <input type="file" id="studentPhoto" hidden accept="image/*" onchange="handleFileSelect(this)">
                <div class="file-preview" id="studentPhotoPreview"></div>
            </div>

            <!-- Skills & Expertise -->
            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-wand-magic-sparkles"></i> Skills & Expertise</h3>
                <div class="form-group">
                    <label>Select Skills (Max 15)</label>
                    <div class="tags-input-container" id="skillsContainer">
                        <input type="text" class="tags-input" placeholder="Type and press Enter..." id="skillsInput">
                    </div>
                    <span class="form-help">E.g., Web Design, Logo Making, Content Writing</span>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label>Evidence of Expertise</label>
                    <div class="file-upload-area" onclick="document.getElementById('skillEvidence').click()">
                        <i class="fa-solid fa-folder-open"></i>
                        <p>Upload certificates, awards, or work samples</p>
                        <span>PDF, JPG, MP4 (Max 10MB)</span>
                    </div>
                    <input type="file" id="skillEvidence" hidden multiple onchange="handleFileSelect(this)">
                    <div class="file-preview" id="skillEvidencePreview"></div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label>Curriculum Vitae (CV)</label>
                    <div class="file-upload-area" onclick="document.getElementById('studentCV').click()">
                        <i class="fa-solid fa-file-pdf"></i>
                        <p>Upload your CV/Resume</p>
                        <span>PDF only (Max 5MB)</span>
                    </div>
                    <input type="file" id="studentCV" hidden accept=".pdf" onchange="handleFileSelect(this)">
                    <div class="file-preview" id="studentCVPreview"></div>
                </div>
            </div>

            <!-- Identity & Age -->
            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-id-card"></i> Identity Verification</h3>
                <div class="form-group">
                    <label>Date of Birth</label>
                    <div class="input-wrapper">
                        <input type="date" id="dob" required onchange="checkAge()">
                    </div>
                </div>

                <div class="form-group">
                    <label>Government ID</label>
                    <div class="file-upload-area" onclick="document.getElementById('studentID').click()">
                        <i class="fa-solid fa-address-card"></i>
                        <p>Upload Citizenship, Passport, or Driving License</p>
                        <span>Clear front and back photo</span>
                    </div>
                    <input type="file" id="studentID" hidden accept="image/*,.pdf" onchange="handleFileSelect(this)">
                    <div class="file-preview" id="studentIDPreview"></div>
                </div>

                <!-- Guardian Approval (Hidden by default) -->
                <div id="guardianSection" style="display: none; margin-top: 20px; padding: 20px; background: var(--background-light); border-radius: 12px; border: 1px solid var(--warning-color);">
                    <h4 style="color: var(--warning-color); margin-bottom: 15px;"><i class="fa-solid fa-triangle-exclamation"></i> Under 18 Requirement</h4>
                    <div class="form-group">
                        <label>Guardian's Contact Number</label>
                        <div class="input-wrapper">
                            <input type="tel" placeholder="Enter guardian's phone number">
                            <i class="fa-solid fa-phone input-icon"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Guardian's Approval Letter</label>
                        <div class="file-upload-area" onclick="document.getElementById('guardianLetter').click()">
                            <i class="fa-solid fa-file-signature"></i>
                            <p>Upload signed approval letter</p>
                        </div>
                        <input type="file" id="guardianLetter" hidden accept=".pdf,image/*" onchange="handleFileSelect(this)">
                        <div class="file-preview" id="guardianLetterPreview"></div>
                    </div>
                </div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="studentTerms" required>
                <label for="studentTerms">I agree to the Terms and Conditions and certify that all provided information is true.</label>
            </div>

            <button type="submit" class="btn-verify">Submit for Verification</button>
        </form>

        <!-- EMPLOYER (INDIVIDUAL) FORM -->
        <form id="employerIndividualForm" class="verification-form" style="display: none;">
            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-user-check"></i> Personal Verification</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Email Address</label>
                        <div class="input-wrapper">
                            <input type="email" value="employer@example.com" readonly class="valid">
                            <i class="fa-solid fa-circle-check success-icon" style="color: var(--success-color)"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <div class="input-wrapper">
                            <input type="tel" value="+977 9800000000" readonly class="valid">
                            <i class="fa-solid fa-circle-check success-icon" style="color: var(--success-color)"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-camera"></i> Profile Picture</h3>
                <div class="file-upload-area" onclick="document.getElementById('indPhoto').click()">
                    <i class="fa-solid fa-user-circle"></i>
                    <p>Upload clear face photo</p>
                </div>
                <input type="file" id="indPhoto" hidden accept="image/*" onchange="handleFileSelect(this)">
                <div class="file-preview" id="indPhotoPreview"></div>
            </div>

            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-id-card"></i> Identity Document</h3>
                <div class="file-upload-area" onclick="document.getElementById('indID').click()">
                    <i class="fa-solid fa-address-card"></i>
                    <p>Upload Citizenship, Passport, or National ID</p>
                </div>
                <input type="file" id="indID" hidden accept="image/*,.pdf" onchange="handleFileSelect(this)">
                <div class="file-preview" id="indIDPreview"></div>
            </div>

            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-file-contract"></i> Agreements</h3>
                <div class="form-group">
                    <label>Signed Registration Application</label>
                    <div class="file-upload-area" onclick="document.getElementById('indAppLetter').click()">
                        <i class="fa-solid fa-file-signature"></i>
                        <p>Upload manually signed application letter</p>
                    </div>
                    <input type="file" id="indAppLetter" hidden accept=".pdf,image/*" onchange="handleFileSelect(this)">
                    <div class="file-preview" id="indAppLetterPreview"></div>
                </div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label>Signed Terms & Conditions</label>
                    <div class="file-upload-area" onclick="document.getElementById('indSignedTerms').click()">
                        <i class="fa-solid fa-file-signature"></i>
                        <p>Upload manually signed terms document</p>
                    </div>
                    <input type="file" id="indSignedTerms" hidden accept=".pdf,image/*" onchange="handleFileSelect(this)">
                    <div class="file-preview" id="indSignedTermsPreview"></div>
                </div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="indDigitalTerms" required>
                <label for="indDigitalTerms">I digitally agree to the Terms and Conditions.</label>
            </div>

            <button type="submit" class="btn-verify">Submit for Verification</button>
        </form>

        <!-- EMPLOYER (COMPANY) FORM -->
        <form id="employerCompanyForm" class="verification-form" style="display: none;">
            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-building"></i> Company Details</h3>
                <div class="form-group">
                    <label>Company Name</label>
                    <div class="input-wrapper">
                        <input type="text" value="Tech Corp Pvt. Ltd." readonly class="valid">
                    </div>
                </div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label>Company Logo</label>
                    <div class="file-upload-area" onclick="document.getElementById('compLogo').click()">
                        <i class="fa-solid fa-image"></i>
                        <p>Upload Company Logo</p>
                    </div>
                    <input type="file" id="compLogo" hidden accept="image/*" onchange="handleFileSelect(this)">
                    <div class="file-preview" id="compLogoPreview"></div>
                </div>
            </div>

            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-address-book"></i> Contact Verification</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Official Email</label>
                        <div class="input-wrapper">
                            <input type="email" value="info@techcorp.com" readonly class="valid">
                            <i class="fa-solid fa-circle-check success-icon" style="color: var(--success-color)"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Office Phone</label>
                        <div class="input-wrapper">
                            <input type="tel" value="+977 01-4000000" readonly class="valid">
                            <i class="fa-solid fa-circle-check success-icon" style="color: var(--success-color)"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Executive Phone</label>
                        <div class="input-wrapper">
                            <input type="tel" placeholder="Executive contact number" required>
                            <i class="fa-solid fa-user-tie input-icon"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Technical Phone</label>
                        <div class="input-wrapper">
                            <input type="tel" placeholder="Technical contact number" required>
                            <i class="fa-solid fa-headset input-icon"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3 class="section-title"><i class="fa-solid fa-file-contract"></i> Official Documents</h3>
                <div class="form-group">
                    <label>Registration Application (Letterhead)</label>
                    <div class="file-upload-area" onclick="document.getElementById('compLetter').click()">
                        <i class="fa-solid fa-file-signature"></i>
                        <p>Upload signed & stamped application on company letterhead</p>
                    </div>
                    <input type="file" id="compLetter" hidden accept=".pdf,image/*" onchange="handleFileSelect(this)">
                    <div class="file-preview" id="compLetterPreview"></div>
                </div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="compTerms" required>
                <label for="compTerms">I certify that I am an authorized representative of this company and agree to the Terms.</label>
            </div>

            <button type="submit" class="btn-verify">Submit for Verification</button>
        </form>

        <div style="text-align: center; margin-top: 20px; color: var(--text-light); font-size: 0.9rem;">
            <p><i class="fa-solid fa-clock"></i> Verification process takes 2-3 business days.</p>
        </div>
    </main>

    <script>
        // Theme Toggle Logic (Reused)
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const themeIcon = themeToggle.querySelector('i');
        const currentTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', currentTheme);
        updateThemeIcon(currentTheme);

        themeToggle.addEventListener('click', () => {
            const newTheme = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });

        function updateThemeIcon(theme) {
            if (theme === 'dark') {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            } else {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }
        }

        // Role Switching Logic
        function switchRole(role) {
            // Update buttons
            document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Hide all forms
            document.querySelectorAll('.verification-form').forEach(form => form.style.display = 'none');

            // Show selected form
            if (role === 'student') {
                document.getElementById('studentForm').style.display = 'block';
            } else if (role === 'employer-individual') {
                document.getElementById('employerIndividualForm').style.display = 'block';
            } else if (role === 'employer-company') {
                document.getElementById('employerCompanyForm').style.display = 'block';
            }
        }

        // File Upload Preview Logic
        function handleFileSelect(input) {
            const previewId = input.id + 'Preview';
            const previewEl = document.getElementById(previewId);
            
            if (input.files && input.files[0]) {
                const file = input.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    let iconClass = 'fa-file';
                    if (file.type.includes('image')) iconClass = 'fa-image';
                    else if (file.type.includes('pdf')) iconClass = 'fa-file-pdf';
                    
                    let previewContent = `
                        <div class="file-info">
                            <span class="file-name"><i class="fa-solid ${iconClass}"></i> ${file.name}</span>
                            <span class="file-size">${(file.size / 1024 / 1024).toFixed(2)} MB</span>
                        </div>
                        <i class="fa-solid fa-trash remove-file" onclick="removeFile('${input.id}')"></i>
                    `;
                    
                    if (file.type.includes('image')) {
                        previewContent = `<img src="${e.target.result}" alt="Preview">` + previewContent;
                    }
                    
                    previewEl.innerHTML = previewContent;
                    previewEl.classList.add('show');
                }
                
                reader.readAsDataURL(file);
            }
        }

        function removeFile(inputId) {
            const input = document.getElementById(inputId);
            input.value = '';
            const previewEl = document.getElementById(inputId + 'Preview');
            previewEl.innerHTML = '';
            previewEl.classList.remove('show');
        }

        // Skills Tag Input Logic
        const skillsInput = document.getElementById('skillsInput');
        const skillsContainer = document.getElementById('skillsContainer');
        let skills = [];

        skillsInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const skill = this.value.trim();
                if (skill && skills.length < 15 && !skills.includes(skill)) {
                    skills.push(skill);
                    renderSkills();
                    this.value = '';
                }
            }
        });

        function renderSkills() {
            // Remove existing tags (keep input)
            const tags = skillsContainer.querySelectorAll('.tag');
            tags.forEach(tag => tag.remove());
            
            // Add tags before input
            skills.forEach(skill => {
                const tag = document.createElement('div');
                tag.className = 'tag';
                tag.innerHTML = `${skill} <i class="fa-solid fa-xmark" onclick="removeSkill('${skill}')"></i>`;
                skillsContainer.insertBefore(tag, skillsInput);
            });
        }

        window.removeSkill = function(skill) {
            skills = skills.filter(s => s !== skill);
            renderSkills();
        }

        // Age Check Logic
        function checkAge() {
            const dob = new Date(document.getElementById('dob').value);
            const today = new Date();
            let age = today.getFullYear() - dob.getFullYear();
            const m = today.getMonth() - dob.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
                age--;
            }

            const guardianSection = document.getElementById('guardianSection');
            if (age < 18) {
                guardianSection.style.display = 'block';
            } else {
                guardianSection.style.display = 'none';
            }
        }

        // Form Submission Simulation
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const btn = form.querySelector('button[type="submit"]');
                const originalText = btn.innerText;
                
                btn.innerText = 'Submitting...';
                btn.disabled = true;
                
                setTimeout(() => {
                    alert('Verification request submitted successfully! You will be notified via email.');
                    window.location.href = 'dashboard.html';
                }, 2000);
            });
        });
    </script>
</body>
</html>