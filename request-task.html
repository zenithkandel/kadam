<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Request Task - Hire Skilled Students for Your Project | KADAM Nepal</title>
    <meta name="description" content="Request tasks from talented students on KADAM. Post your project, set budget, and hire skilled students for web development, graphic design, logo making, content writing, and more. Secure payment system with 10% advance and transparent pricing.">
    <meta name="keywords" content="hire students Nepal, request task, direct hire student, freelance Nepal, student jobs, KADAM platform, project posting, web development, graphic design, logo design, affordable services, student freelancers">
    <meta name="author" content="KADAM Nepal">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta property="og:title" content="Request Task - Hire Skilled Students | KADAM Nepal">
    <meta property="og:description" content="Connect with talented students for your projects. Web development, design, content writing, and more. Secure payment with transparent pricing.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kadam.com.np/request-task.html">
    <meta property="og:image" content="https://kadam.com.np/assets/og-image.jpg">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Request Task - Hire Skilled Students | KADAM Nepal">
    <meta name="twitter:description" content="Connect with talented students for your projects on KADAM Nepal.">
    <meta name="twitter:image" content="https://kadam.com.np/assets/twitter-image.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://kadam.com.np/request-task.html">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- External Resources -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Request Task - Hire Students",
      "description": "Request tasks from skilled students on KADAM Nepal",
      "url": "https://kadam.com.np/request-task.html",
      "publisher": {
        "@type": "Organization",
        "name": "KADAM Nepal"
      }
    }
    </script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="request-task.css">
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <i class="fa-solid fa-moon"></i>
    </button>

    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <a href="profile.html" class="back-link">
                <i class="fa-solid fa-arrow-left"></i>
                Back to Profile
            </a>
            <h1 class="page-title">Request a Task</h1>
            <p class="page-subtitle">Fill in the details below to directly request this student for your task</p>
        </div>

        <!-- Student Info Card -->
        <div class="student-card">
            <img src="https://ui-avatars.com/api/?name=John+Doe&size=160&background=d4a574&color=fff&bold=true" alt="John Doe" class="student-avatar">
            <div class="student-info">
                <h3>John Doe</h3>
                <div class="student-meta">
                    <span><i class="fa-solid fa-star"></i> 4.8 Rating</span>
                    <span><i class="fa-solid fa-check-circle"></i> 47 Tasks</span>
                    <span><i class="fa-solid fa-crown"></i> Level 8</span>
                </div>
            </div>
        </div>

        <!-- Important Info -->
        <div class="info-box">
            <div class="info-box-title">
                <i class="fa-solid fa-info-circle"></i>
                How it Works
            </div>
            <div class="info-box-text">
                Once you submit this request, the student will be notified and can accept or decline. If accepted, a digital agreement will be signed and you'll need to make a 10% advance payment (Rs. {{advance}}) to begin the work. The remaining 90% (Rs. {{final}}) will be paid upon completion. KADAM charges a 9.5% platform fee.
            </div>
        </div>

        <!-- Task Request Form -->
        <form class="form-card" id="requestTaskForm">
            <!-- Task Details Section -->
            <div class="form-section">
                <h2 class="section-title">
                    <i class="fa-solid fa-clipboard-list"></i>
                    Task Details
                </h2>

                <div class="form-group">
                    <label for="taskTitle">Task Title <span class="required">*</span></label>
                    <input type="text" id="taskTitle" name="taskTitle" placeholder="E.g., Design a modern logo for my startup" maxlength="150" required>
                    <span class="form-help">Maximum 15 words - Be clear and concise</span>
                    <span class="char-count" id="titleCount">0 / 150</span>
                </div>

                <div class="form-group">
                    <label for="taskDescription">Detailed Description <span class="required">*</span></label>
                    <textarea id="taskDescription" name="taskDescription" placeholder="Describe your task requirements, deliverables, and any specific instructions..." maxlength="1500" required></textarea>
                    <span class="form-help">Maximum 200 words - Include all important details</span>
                    <span class="char-count" id="descCount">0 / 1500</span>
                </div>

                <div class="form-group">
                    <label>Task Category <span class="required">*</span></label>
                    <div class="category-grid">
                        <div class="category-option">
                            <input type="radio" id="cat-website" name="category" value="Website" required>
                            <label for="cat-website" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-globe"></i>
                                </div>
                                <span>Website</span>
                            </label>
                        </div>
                        <div class="category-option">
                            <input type="radio" id="cat-software" name="category" value="Software">
                            <label for="cat-software" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-code"></i>
                                </div>
                                <span>Software</span>
                            </label>
                        </div>
                        <div class="category-option">
                            <input type="radio" id="cat-hardware" name="category" value="Computer Hardware">
                            <label for="cat-hardware" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-microchip"></i>
                                </div>
                                <span>Hardware</span>
                            </label>
                        </div>
                        <div class="category-option">
                            <input type="radio" id="cat-art" name="category" value="Art">
                            <label for="cat-art" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-paint-brush"></i>
                                </div>
                                <span>Art</span>
                            </label>
                        </div>
                        <div class="category-option">
                            <input type="radio" id="cat-music" name="category" value="Music">
                            <label for="cat-music" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-music"></i>
                                </div>
                                <span>Music</span>
                            </label>
                        </div>
                        <div class="category-option">
                            <input type="radio" id="cat-design" name="category" value="Graphics Design">
                            <label for="cat-design" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-palette"></i>
                                </div>
                                <span>Design</span>
                            </label>
                        </div>
                        <div class="category-option">
                            <input type="radio" id="cat-logo" name="category" value="Logo Making">
                            <label for="cat-logo" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-pen-nib"></i>
                                </div>
                                <span>Logo</span>
                            </label>
                        </div>
                        <div class="category-option">
                            <input type="radio" id="cat-video" name="category" value="Videography">
                            <label for="cat-video" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-video"></i>
                                </div>
                                <span>Video</span>
                            </label>
                        </div>
                        <div class="category-option">
                            <input type="radio" id="cat-writing" name="category" value="Writing">
                            <label for="cat-writing" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-pencil-alt"></i>
                                </div>
                                <span>Writing</span>
                            </label>
                        </div>
                        <div class="category-option">
                            <input type="radio" id="cat-other" name="category" value="Other">
                            <label for="cat-other" class="category-label">
                                <div class="category-icon">
                                    <i class="fa-solid fa-ellipsis-h"></i>
                                </div>
                                <span>Other</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Project Scope Section -->
            <div class="form-section">
                <h2 class="section-title">
                    <i class="fa-solid fa-chart-line"></i>
                    Project Scope
                </h2>

                <div class="form-group">
                    <label for="timeRequired">Estimated Time Required (hours) <span class="required">*</span></label>
                    <input type="number" id="timeRequired" name="timeRequired" min="1" max="1000" placeholder="E.g., 40" required oninput="calculateBudget()" aria-describedby="timeHelp">
                    <span class="form-help" id="timeHelp">Minimum: 1 hour (Rs. 100/hour minimum rate)</span>
                </div>

                <div class="form-group">
                    <label for="deadline">Deadline for Completion <span class="required">*</span></label>
                    <input type="date" id="deadline" name="deadline" required aria-describedby="deadlineHelp">
                    <span class="form-help" id="deadlineHelp">When do you need this completed?</span>
                </div>
            </div>

            <!-- Budget Section -->
            <div class="form-section">
                <h2 class="section-title">
                    <i class="fa-solid fa-dollar-sign"></i>
                    Budget & Payment
                </h2>

                <div class="form-group">
                    <label for="budget">Your Offer Amount (Rs.) <span class="required">*</span></label>
                    <input type="number" id="budget" name="budget" min="100" placeholder="E.g., 5000" required oninput="calculateBudget()" aria-describedby="budgetHelp">
                    <span class="form-help" id="budgetHelp">Minimum: Rs. 100/hour based on estimated time</span>
                    <div class="error-message" id="budgetError">Please enter a valid budget amount</div>
                </div>

                <div class="budget-calculator">
                    <div class="calc-row">
                        <span class="calc-label">Your Offer Amount</span>
                        <span class="calc-value">Rs. <span id="offerAmount">0</span></span>
                    </div>
                    <div class="calc-row">
                        <span class="calc-label">Platform Fee (9.5%)</span>
                        <span class="calc-value">- Rs. <span id="platformFee">0</span></span>
                    </div>
                    <div class="calc-row">
                        <span class="calc-label">Student Receives</span>
                        <span class="calc-value">Rs. <span id="studentReceives">0</span></span>
                    </div>
                    <div class="calc-row">
                        <span class="calc-label">Advance Payment (10%)</span>
                        <span class="calc-value">Rs. <span id="advancePayment">0</span></span>
                    </div>
                    <div class="calc-row">
                        <span class="calc-label">Final Payment (90%)</span>
                        <span class="calc-value">Rs. <span id="finalPayment">0</span></span>
                    </div>
                </div>
            </div>

            <!-- Additional Info Section -->
            <div class="form-section">
                <h2 class="section-title">
                    <i class="fa-solid fa-paperclip"></i>
                    Additional Information
                </h2>

                <div class="form-group">
                    <label for="referenceFile">Reference Image/File (Optional)</label>
                    <div class="file-upload" onclick="document.getElementById('referenceFile').click()" role="button" tabindex="0" aria-label="Upload reference file">
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                        <div class="file-upload-text">Click to upload reference file</div>
                        <div class="file-upload-hint">Supported: Images, PDFs, Documents (Max 10MB)</div>
                    </div>
                    <input type="file" id="referenceFile" name="referenceFile" accept="image/*,.pdf,.doc,.docx" onchange="showFilePreview(this)" aria-describedby="fileHelp">
                    <span class="form-help" id="fileHelp">Upload any reference materials to help explain your requirements</span>
                    <div id="filePreview" style="display: none;"></div>
                </div>

                <div class="form-group">
                    <label for="contactInfo">Your Contact Information <span class="required">*</span></label>
                    <input type="text" id="contactInfo" name="contactInfo" placeholder="Email or Phone Number" required aria-describedby="contactHelp">
                    <span class="form-help" id="contactHelp">How should the student contact you?</span>
                    <div class="error-message" id="contactError">Please enter valid contact information</div>
                </div>

                <div class="form-group">
                    <label for="additionalNotes">Additional Notes (Optional)</label>
                    <textarea id="additionalNotes" name="additionalNotes" placeholder="Any other requirements or preferences..." rows="4"></textarea>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="window.history.back()">
                    <i class="fa-solid fa-xmark"></i>
                    Cancel
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="fa-solid fa-paper-plane"></i>
                    Send Request
                </button>
            </div>
        </form>
    </div>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        const icon = themeToggle.querySelector('i');

        const currentTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', currentTheme);
        updateIcon(currentTheme);

        themeToggle.addEventListener('click', () => {
            const newTheme = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateIcon(newTheme);
        });

        function updateIcon(theme) {
            if (theme === 'dark') {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        }

        // Set minimum date to today
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('deadline').setAttribute('min', today);

        // Character counters
        const taskTitle = document.getElementById('taskTitle');
        const taskDescription = document.getElementById('taskDescription');
        const titleCount = document.getElementById('titleCount');
        const descCount = document.getElementById('descCount');

        taskTitle.addEventListener('input', function() {
            titleCount.textContent = this.value.length + ' / 150';
            // Validate word count (max 15 words)
            const wordCount = this.value.trim().split(/\s+/).filter(word => word.length > 0).length;
            if (wordCount > 15) {
                this.classList.add('error');
            } else {
                this.classList.remove('error');
            }
        });

        taskDescription.addEventListener('input', function() {
            descCount.textContent = this.value.length + ' / 1500';
            // Validate word count (max 200 words)
            const wordCount = this.value.trim().split(/\s+/).filter(word => word.length > 0).length;
            if (wordCount > 200) {
                this.classList.add('error');
            } else {
                this.classList.remove('error');
            }
        });

        // Budget Calculator
        function calculateBudget() {
            const timeRequired = parseFloat(document.getElementById('timeRequired').value) || 0;
            const budget = parseFloat(document.getElementById('budget').value) || 0;
            const budgetInput = document.getElementById('budget');
            const budgetError = document.getElementById('budgetError');
            
            // Set minimum budget based on time
            const minBudget = timeRequired * 100;
            if (budget > 0 && budget < minBudget) {
                budgetInput.setCustomValidity(`Minimum budget for ${timeRequired} hours is Rs. ${minBudget}`);
                budgetInput.classList.add('error');
                budgetError.textContent = `Minimum budget for ${timeRequired} hours is Rs. ${minBudget}`;
                budgetError.classList.add('show');
            } else {
                budgetInput.setCustomValidity('');
                budgetInput.classList.remove('error');
                budgetError.classList.remove('show');
                if (budget > 0) {
                    budgetInput.classList.add('success');
                } else {
                    budgetInput.classList.remove('success');
                }
            }

            // Calculate fees
            const platformFee = (budget * 0.095).toFixed(2);
            const studentReceives = (budget - platformFee).toFixed(2);
            const advancePayment = (budget * 0.10).toFixed(2);
            const finalPayment = (budget * 0.90).toFixed(2);

            // Update display
            document.getElementById('offerAmount').textContent = budget.toFixed(2);
            document.getElementById('platformFee').textContent = platformFee;
            document.getElementById('studentReceives').textContent = studentReceives;
            document.getElementById('advancePayment').textContent = advancePayment;
            document.getElementById('finalPayment').textContent = finalPayment;
        }

        // File Preview
        function showFilePreview(input) {
            const preview = document.getElementById('filePreview');
            if (input.files && input.files[0]) {
                const file = input.files[0];
                
                // Validate file size (max 10MB)
                const maxSize = 10 * 1024 * 1024; // 10MB in bytes
                if (file.size > maxSize) {
                    alert('File size exceeds 10MB. Please choose a smaller file.');
                    input.value = '';
                    return;
                }
                
                preview.innerHTML = `
                    <div class="file-preview">
                        <div class="file-preview-info">
                            <i class="fa-solid fa-file"></i>
                            <span>${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)</span>
                        </div>
                        <button type="button" class="remove-file" onclick="removeFile()" aria-label="Remove file">
                            <i class="fa-solid fa-times"></i> Remove
                        </button>
                    </div>
                `;
                preview.style.display = 'block';
            }
        }

        function removeFile() {
            document.getElementById('referenceFile').value = '';
            document.getElementById('filePreview').style.display = 'none';
        }

        // Contact Information Validation
        const contactInfo = document.getElementById('contactInfo');
        const contactError = document.getElementById('contactError');

        contactInfo.addEventListener('blur', function() {
            const value = this.value.trim();
            // Simple email or phone validation
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const phonePattern = /^[0-9]{10,}$/;
            
            if (value && !emailPattern.test(value) && !phonePattern.test(value.replace(/[\s\-\(\)]/g, ''))) {
                this.classList.add('error');
                contactError.textContent = 'Please enter a valid email or phone number';
                contactError.classList.add('show');
            } else {
                this.classList.remove('error');
                contactError.classList.remove('show');
                if (value) {
                    this.classList.add('success');
                }
            }
        });

        // File upload keyboard accessibility
        const fileUpload = document.querySelector('.file-upload');
        fileUpload.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                document.getElementById('referenceFile').click();
            }
        });

        // Form Submission
        document.getElementById('requestTaskForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate minimum budget
            const timeRequired = parseFloat(document.getElementById('timeRequired').value);
            const budget = parseFloat(document.getElementById('budget').value);
            const minBudget = timeRequired * 100;
            
            if (budget < minBudget) {
                alert(`Minimum budget for ${timeRequired} hours is Rs. ${minBudget}`);
                document.getElementById('budget').focus();
                return;
            }

            // Validate title word count
            const titleWords = document.getElementById('taskTitle').value.trim().split(/\s+/).filter(word => word.length > 0).length;
            if (titleWords > 15) {
                alert('Task title must be 15 words or less. Please shorten your title.');
                document.getElementById('taskTitle').focus();
                return;
            }

            // Validate description word count
            const descWords = document.getElementById('taskDescription').value.trim().split(/\s+/).filter(word => word.length > 0).length;
            if (descWords > 200) {
                alert('Task description must be 200 words or less. Please shorten your description.');
                document.getElementById('taskDescription').focus();
                return;
            }

            // Validate category selection
            const categorySelected = document.querySelector('input[name="category"]:checked');
            if (!categorySelected) {
                alert('Please select a task category.');
                return;
            }

            // Show confirmation
            const studentName = "John Doe";
            const taskTitle = document.getElementById('taskTitle').value;
            const advancePayment = document.getElementById('advancePayment').textContent;
            const submitBtn = this.querySelector('button[type="submit"]');
            
            if (confirm(`Are you sure you want to send this task request to ${studentName}?\n\nTask: ${taskTitle}\nAdvance Payment: Rs. ${advancePayment}\n\nOnce accepted, you'll need to make the advance payment to begin work.`)) {
                // Show loading state
                submitBtn.classList.add('loading');
                submitBtn.disabled = true;

                // Simulate submission (in production, this would be an API call)
                setTimeout(() => {
                    submitBtn.classList.remove('loading');
                    submitBtn.disabled = false;
                    alert('Task request sent successfully! The student will be notified and can accept or decline your request. You will receive a notification once they respond.');
                    // In production, this would submit to backend
                    // window.location.href = 'dashboard.html';
                }, 1500);
            }
        });

        // Auto-save draft to localStorage
        const formFields = ['taskTitle', 'taskDescription', 'timeRequired', 'deadline', 'budget', 'contactInfo', 'additionalNotes'];
        
        formFields.forEach(fieldId => {
            const field = document.getElementById(fieldId);
            if (field) {
                // Load saved value
                const savedValue = localStorage.getItem(`draft_${fieldId}`);
                if (savedValue) {
                    field.value = savedValue;
                    if (fieldId === 'taskTitle') titleCount.textContent = savedValue.length + ' / 150';
                    if (fieldId === 'taskDescription') descCount.textContent = savedValue.length + ' / 1500';
                }
                
                // Save on input
                field.addEventListener('input', () => {
                    localStorage.setItem(`draft_${fieldId}`, field.value);
                });
            }
        });

        // Clear draft on successful submission
        function clearDraft() {
            formFields.forEach(fieldId => {
                localStorage.removeItem(`draft_${fieldId}`);
            });
        }

        // Trigger budget calculation on load if values exist
        if (document.getElementById('budget').value) {
            calculateBudget();
        }
    </script>
</body>
</html>
